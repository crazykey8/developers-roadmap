### Безопасность

#### Атаки

* **XSS (Cross-Site Scripting)**
  * **Что такое?**
    * XSS — это уязвимость веб-приложений, позволяющая злоумышленнику внедрить вредоносный скрипт на веб-страницу, которая затем будет выполнена в браузере жертвы.
  * **Как работает?**
    * Вредоносный скрипт внедряется через пользовательский ввод или уязвимости в веб-приложении. Этот скрипт может быть выполнен на стороне клиента и получить доступ к сессионным кукам, контенту страницы и другим данным.
  * **Для чего можно использовать?**
    * XSS может использоваться для кражи сессионных куков, внедрения фальшивых интерфейсов, выполнения произвольных действий от имени жертвы и других злонамеренных действий.
  * **Какие бывают типы? Что вы о них знаете?**
    * **Stored XSS (сохраненный):** Вредоносный скрипт сохраняется на сервере (например, в базе данных) и выполняется каждый раз при загрузке страницы.
    * **Reflected XSS (отраженный):** Вредоносный скрипт отражается в ответе сервера на запрос, например, через параметры URL.
    * **DOM-based XSS (основанный на DOM):** Скрипт выполняется из-за манипуляций с DOM в клиентском браузере.
  * **Какие есть способы предотвратить?**
    * **Экранирование данных:** Преобразование специальных символов в HTML-сущности.
    * **Content Security Policy (CSP):** Настройка заголовков CSP для ограничения источников скриптов.
    * **Валидация и санитация ввода:** Очистка и проверка пользовательского ввода на сервере и клиенте.
    * **Использование библиотек и фреймворков:** Использование библиотек, которые автоматически экранируют данные (например, React).

* **CSRF (Cross-Site Request Forgery)**
  * **Что такое?**
    * CSRF — это атака, при которой злоумышленник заставляет жертву выполнить нежелательное действие на сайте, на который жертва уже аутентифицирована.
  * **Как работает?**
    * Злоумышленник создаёт поддельный запрос, который выполняется от имени жертвы, используя её сессионные данные или куки.
  * **Для чего можно использовать?**
    * CSRF может использоваться для выполнения нежелательных действий, таких как изменение паролей, создание фальшивых записей и другие действия, которые могут нанести вред жертве.
  * **Какие есть способы предотвратить?**
    * **CSRF-токены:** Генерация уникальных токенов для проверки подлинности запросов.
    * **Проверка реферера:** Проверка заголовка `Referer` для подтверждения источника запроса.
    * **Секретные куки:** Установка флага `SameSite` на куки для ограничения их отправки на сторонние сайты.

#### Что такое SOP (Same-Origin Policy)? Зачем нужен? Как можно обойти ограничения SOP?

* **Что такое SOP (Same-Origin Policy)?**
  * SOP — это политика безопасности, запрещающая веб-страницам делать запросы к ресурсам на других доменах, отличных от их собственного. Это предотвращает утечку данных и атаки на конфиденциальные данные.
* **Зачем нужен?**
  * SOP нужен для предотвращения межсайтовых атак, таких как XSS и CSRF, и защиты конфиденциальности данных пользователей.
* **Как можно обойти ограничения SOP?**
  * **CORS (Cross-Origin Resource Sharing):** Позволяет серверам контролировать, какие домены могут получать доступ к их ресурсам.
  * **JSONP (JSON with Padding):** Старый метод для получения данных с другого домена, но имеет свои уязвимости.
  * **Прокси-серверы:** Использование серверного прокси для маршрутизации запросов.

#### Что такое CORS (Cross-Origin Resource Sharing)? Зачем нужен?

* **Что такое CORS (Cross-Origin Resource Sharing)?**
  * CORS — это механизм, позволяющий веб-страницам делать запросы к ресурсам на других доменах, если сервер явно разрешает это через специальные заголовки.
* **Зачем нужен?**
  * CORS нужен для обеспечения безопасного обмена ресурсами между разными доменами, предотвращая нарушения политики одного источника (SOP) и позволяя гибкость в запросах.

* **Preflight request**
  * **Что такое?**
    * Preflight request — это запрос типа `OPTIONS`, отправляемый браузером перед основным запросом для проверки разрешений на выполнение кросс-доменных запросов.
  * **Зачем нужен?**
    * Он используется для проверки, разрешает ли сервер выполнение запросов с определёнными методами и заголовками.
  * **Какие запросы его требуют?**
    * Запросы с нестандартными HTTP-методами (например, `PUT`, `DELETE`) или нестандартными заголовками требуют preflight-запросов.
  * **Что он в себе содержит?**
    * Preflight-запрос содержит заголовок `Access-Control-Request-Method`, указывающий метод основного запроса, и `Access-Control-Request-Headers`, указывающий на используемые заголовки.
  * **Как на него отвечает сервер?**
    * Сервер отвечает заголовками `Access-Control-Allow-Methods` и `Access-Control-Allow-Headers`, указывающими разрешённые методы и заголовки.

* **Какие бывают `Access-Control-*` заголовки? Зачем они нужны?**
  * **Access-Control-Allow-Origin:** Определяет, какие домены могут получать доступ к ресурсам.
  * **Access-Control-Allow-Methods:** Определяет, какие HTTP-методы разрешены при доступе к ресурсам.
  * **Access-Control-Allow-Headers:** Определяет, какие заголовки могут быть использованы в запросе.
  * **Access-Control-Expose-Headers:** Определяет, какие заголовки могут быть получены в ответе.
  * **Access-Control-Max-Age:** Указывает, на какой период времени результат preflight-запроса может кэшироваться.

#### Что такое JSONP? Зачем он нужен?

* **Что такое JSONP?**
  * JSONP (JSON with Padding) — это метод, позволяющий получать данные с другого домена, обернув JSON в функцию обратного вызова (callback), что позволяет обойти ограничения SOP.
* **Зачем он нужен?**
  * JSONP использовался до появления CORS для выполнения кросс-доменных запросов, когда браузеры не поддерживали CORS. Он позволяет получать данные с другого домена, используя `<script>` тег, который не подвержен ограничениям SOP. Однако, JSONP имеет свои уязвимости и рекомендуется использовать CORS.